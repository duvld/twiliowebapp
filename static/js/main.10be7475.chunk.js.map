{"version":3,"sources":["VideoComponent.js","app.js","serviceWorker.js","index.js"],"names":["VideoComponent","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","identity","roomName","roomNameErr","previewTracks","localMediaAvailable","hasJoinedRoom","activeRoom","joinRoom","bind","assertThisInitialized","handleRoomNameChange","roomJoined","leaveRoom","detachTracks","detachParticipantTracks","_this2","axios","get","then","results","_results$data","data","token","setState","e","target","value","trim","console","log","connectOptions","name","tracks","Video","connect","error","alert","message","container","forEach","track","appendChild","attach","participant","Array","from","values","attachTracks","detach","detachedElement","remove","room","_this3","previewContainer","refs","localMedia","querySelector","attachParticipantTracks","localParticipant","participants","remoteMedia","on","kind","stop","disconnect","showLocalTrack","react_default","a","createElement","className","ref","joinOrLeaveRoomButton","RaisedButton_default","label","secondary","onClick","primary","Card","TextField_default","hintText","onChange","errorText","undefined","id","Component","injectTapEventPlugin","dom","document","getElementById","render","MuiThemeProvider_default","muiTheme","getMuiTheme","darkBaseTheme","AppBar_default","title","VideoComponent_VideoComponent","Boolean","window","location","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.10be7475.chunk.js","sourcesContent":["//app/VideoComponent.js\nimport React, { Component } from 'react';\nimport Video from 'twilio-video';\nimport axios from 'axios';\nimport RaisedButton from 'material-ui/RaisedButton';\nimport TextField from 'material-ui/TextField';\nimport { Card, CardHeader, CardText } from 'material-ui/Card';\n\nexport default class VideoComponent extends Component {\n constructor(props) {\n   super();\n   this.state = {\n      identity: null,  /* Will hold the fake name assigned to the client. The name is generated by faker on the server */\n      roomName: '',    /* Will store the room name */\n      roomNameErr: false,  /* Track error for room name TextField. This will    enable us to show an error message when this variable is true */\n      previewTracks: null,\n      localMediaAvailable: false, /* Represents the availability of a LocalAudioTrack(microphone) and a LocalVideoTrack(camera) */\n      hasJoinedRoom: false,\n      activeRoom: null // Track the current active room\n   };\n\n   this.joinRoom = this.joinRoom.bind(this);\n   this.handleRoomNameChange = this.handleRoomNameChange.bind(this);\n   this.roomJoined = this.roomJoined.bind(this);\n   this.leaveRoom = this.leaveRoom.bind(this);\n   this.detachTracks = this.detachTracks.bind(this);\n   this.detachParticipantTracks =this.detachParticipantTracks.bind(this);\n }\n\n componentDidMount() {\n\t  axios.get('/token').then(results => {\n\t    /*\n\tMake an API call to get the token and identity(fake name) and  update the corresponding state variables.\n\t    */\n\t    const { identity, token } = results.data;\n\t    this.setState({ identity, token });\n\t  });\n\t}\n\n\n\thandleRoomNameChange(e) {\n  /* Fetch room name from text field and update state */\n      let roomName = e.target.value; \n      this.setState({ roomName });\n    }\n\n    joinRoom() {\n   /* \n\tShow an error message on room name text field if user tries         joining a room without providing a room name. This is enabled by setting `roomNameErr` to true\n\t  */\n        if (!this.state.roomName.trim()) {\n            this.setState({ roomNameErr: true });\n            return;\n        }\n\n        console.log(\"Joining room '\" + this.state.roomName + \"'...\");\n        let connectOptions = {\n            name: this.state.roomName\n        };\n\n        if (this.state.previewTracks) {\n            connectOptions.tracks = this.state.previewTracks;\n        }\n\n        /* \n\t\tConnect to a room by providing the token and connection    options that include the room name and tracks. We also show an alert if an error occurs while connecting to the room.    \n\t\t*/  \n\t\tVideo.connect(this.state.token, connectOptions).then(this.roomJoined, error => {\n\t\t  alert('Could not connect to Twilio: ' + error.message);\n\t\t});\n\t}\t\n\n\t// Attach the Tracks to the DOM.\n\tattachTracks(tracks, container) {\n\t  tracks.forEach(track => {\n\t    container.appendChild(track.attach());\n\t  });\n\t}\n\n\t// Attach the Participant's Tracks to the DOM.\n\tattachParticipantTracks(participant, container) {\n\t  var tracks = Array.from(participant.tracks.values());\n\t  this.attachTracks(tracks, container);\n\t}\n\n\tdetachTracks(tracks) {\n\t    tracks.forEach(track => {\n\t      track.detach().forEach(detachedElement => {\n\t        detachedElement.remove();\n\t      });\n\t    });\n\t  }\n\n\tdetachParticipantTracks(participant) {\n\t  var tracks = Array.from(participant.tracks.values());\n\t  this.detachTracks(tracks);\n\t}\n\n\troomJoined(room) {\n\t  // Called when a participant joins a room\n\t  console.log(\"Joined as '\" + this.state.identity + \"'\");\n\t  this.setState({\n\t    activeRoom: room,\n\t    localMediaAvailable: true,\n\t    hasJoinedRoom: true  // Removes ‘Join Room’ button and shows ‘Leave Room’\n\t  });\n\n\t  // Attach LocalParticipant's tracks to the DOM, if not already attached.\n\t  var previewContainer = this.refs.localMedia;\n\t  if (!previewContainer.querySelector('video')) {\n\t    this.attachParticipantTracks(room.localParticipant, previewContainer);\n\t  }\n\n\t  // Attach the Tracks of the room's participants.\n    room.participants.forEach(participant => {\n      console.log(\"Already in Room: '\" + participant.identity + \"'\");\n      var previewContainer = this.refs.remoteMedia;\n      this.attachParticipantTracks(participant, previewContainer);\n    });\n\n    // Participant joining room\n    room.on('participantConnected', participant => {\n      console.log(\"Joining: '\" + participant.identity + \"'\");\n    });\n\n    // Attach participant’s tracks to DOM when they add a track\n    room.on('trackAdded', (track, participant) => {\n      console.log(participant.identity + ' added track: ' + track.kind);\n      var previewContainer = this.refs.remoteMedia;\n      this.attachTracks([track], previewContainer);\n    });\n\n    // Detach participant’s track from DOM when they remove a track.\n    room.on('trackRemoved', (track, participant) => {\n      this.log(participant.identity + ' removed track: ' + track.kind);\n      this.detachTracks([track]);\n    });\n\n    // Detach all participant’s track when they leave a room.\n    room.on('participantDisconnected', participant => {\n      console.log(\"Participant '\" + participant.identity + \"' left the room\");\n      this.detachParticipantTracks(participant);\n    });\n\n    // Once the local participant leaves the room, detach the Tracks\n    // of all other participants, including that of the LocalParticipant.\n    room.on('disconnected', () => {\n      if (this.state.previewTracks) {\n        this.state.previewTracks.forEach(track => {\n          track.stop();\n        });\n      }\n      this.detachParticipantTracks(room.localParticipant);\n      room.participants.forEach(this.detachParticipantTracks);\n      this.state.activeRoom = null;\n      this.setState({ hasJoinedRoom: false, localMediaAvailable: false });\n    });  \n\t    // ... more event listeners\n\t}\n\tleaveRoom() {\n   \t\tthis.state.activeRoom.disconnect();\n   \t\tthis.setState({ hasJoinedRoom: false, localMediaAvailable: false });\n\t}\n\n\trender() {\n\t  /* \n\t   Controls showing of the local track\n\t   Only show video track after user has joined a room else show nothing \n\t  */\n\t  let showLocalTrack = this.state.localMediaAvailable ? (\n\t    <div className=\"flex-item\"><div ref=\"localMedia\" /> </div>) : '';   \n\t  /*\n\t   Controls showing of ‘Join Room’ or ‘Leave Room’ button.  \n\t   Hide 'Join Room' button if user has already joined a room otherwise \n\t   show `Leave Room` button.\n\t  */\n\t  let joinOrLeaveRoomButton = this.state.hasJoinedRoom ? (\n\t  <RaisedButton label=\"Leave Room\" secondary={true} onClick={this.leaveRoom}  />) : (\n\t  <RaisedButton label=\"Join Room\" primary={true} onClick={this.joinRoom} />);\n\t  return (\n\t    <Card>\n\t    <CardText>\n\t      <div className=\"flex-container\">\n\t    {showLocalTrack} {/* Show local track if available */}\n\t    <div className=\"flex-item\">\n\t    {/* \n\tThe following text field is used to enter a room name. It calls  `handleRoomNameChange` method when the text changes which sets the `roomName` variable initialized in the state.\n\t    */}\n\t    <TextField hintText=\"Room Name\" onChange={this.handleRoomNameChange} \n\terrorText = {this.state.roomNameErr ? 'Room Name is required' : undefined} \n\t     /><br />\n\t    {joinOrLeaveRoomButton}  {/* Show either ‘Leave Room’ or ‘Join Room’ button */}\n\t     </div>\n\t    {/* \n\tThe following div element shows all remote media (other                             participant’s tracks) \n\t    */}\n\t    <div className=\"flex-item\" ref=\"remoteMedia\" id=\"remote-media\" />\n\t  </div>\n\t</CardText>\n\t    </Card>\n\t  );\n\t}\n}","import React, { Component } from \"react\";\nimport AppBar from 'material-ui/AppBar';\nimport { render } from \"react-dom\";\nimport \"./styles/styles.css\";\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\nimport darkBaseTheme from 'material-ui/styles/baseThemes/darkBaseTheme';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport injectTapEventPlugin from \"react-tap-event-plugin\";\nimport VideoComponent from './VideoComponent';\ninjectTapEventPlugin();\n\nlet dom = document.getElementById(\"app\");\nrender(\n    <MuiThemeProvider muiTheme={getMuiTheme(darkBaseTheme)}>\n            <div>\n            <AppBar title=\"React Twilio Video\" />\n            <VideoComponent />\n            </div>\n    </MuiThemeProvider>\n    ,\n    dom\n);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport app from './app';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<app />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}